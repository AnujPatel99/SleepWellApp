@using System.Net.Http.Json
@using Microsoft.AspNetCore.Authorization
@using Microsoft.AspNetCore.Components.WebAssembly.Authentication
@using SleepWellApp.Shared
@using MudBlazor
@inject HttpClient httpClient

@page "/admin"

<PageTitle>Admin Page</PageTitle>

<AuthorizeView>
    <Authorized>
        <MudText Align="Align.Center" Typo="Typo.h3">User Index</MudText>
        <br /><br /><br /><br /><br />
        <MudTable Items="@ListOfUsers" Hover="true" Breakpoint="Breakpoint.Sm" TotalItems=@ListOfUsers.Count() Striped="true" Filter="new Func<UserDto,bool>(FilterFunc1)" @bind-SelectedItem="selectedItem1">
            <ToolBarContent>
                <MudText Typo="Typo.h6">User Index</MudText>
                <MudSpacer />
                <MudTextField @bind-Value="searchString1" Placeholder="Search" Adornment="Adornment.Start" AdornmentIcon="@Icons.Material.Filled.Search" IconSize="Size.Medium" Class="mt-0"></MudTextField>
            </ToolBarContent>
            <HeaderContent>
                <MudTh>UserName</MudTh>
                <MudTh>First Name</MudTh>
                <MudTh>Last Name</MudTh>
                <MudTh>ID</MudTh>
            </HeaderContent>
            <RowTemplate Context="row">
                <MudTd DataLabel="UserName">@row.UserName</MudTd>
                <MudTd DataLabel="First Name">@row.FirstName</MudTd>
                <MudTd DataLabel="Last Name">@row.LastName</MudTd>
                <MudTd DataLabel="ID">@row.Id</MudTd>
            </RowTemplate>
        </MudTable>
        <br /><br />
        <MudButton Href="create-user" Variant="Variant.Filled" EndIcon="@Icons.Material.Filled.Add" Color="Color.Primary">Add User</MudButton>
        <MudButton Href="create-role" Variant="Variant.Filled" EndIcon="@Icons.Material.Filled.Person" Color="Color.Primary">Create Role</MudButton>
        <MudButton Href="manage-role" Variant="Variant.Filled" EndIcon="@Icons.Material.Filled.ManageAccounts" Color="Color.Primary">Manage Role</MudButton>
    </Authorized>
    <NotAuthorized>
        <h3 style="text-align:center">
            Whoops...You aren't logged in!
            <br>Either Log in or Register an Account to view this page!
        </h3>
    </NotAuthorized>
</AuthorizeView>


